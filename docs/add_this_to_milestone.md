# Milestone: 게임 UI 탐지 엔진 v1.0 (OD + OCR)

## 1. 🎯 목표 (Objective)

- **문제:** 게임 해상도, 화면 비율, UI 설정 변경 시 기존 OCR의 정적 BBOX(좌표) 방식이 실패하는 문제.
- **해결:** 동적으로 변화하는 화면 환경에서도 핵심 UI 요소(예: 일일 임무 HUD)의 위치를 '튼튼하게(Robust)' 탐지하고, 그 안의 텍스트를 정확히 인식하는 시스템을 구축한다.

## 2. 🏛️ 핵심 아키텍처 (Chosen Architecture)

VLM(Vision Language Model)의 높은 비용(무게, 속도)을 고려하여, **'객체 탐지(Object Detection) + OCR' 하이브리드 방식**을 최종 채택한다.

1.  **[Task 1: 탐지] 객체 탐지 모델 (YOLO 등)**
    * **역할:** 전체 스크린샷에서 '퀘스트 HUD', '미니맵' 등 우리가 찾는 UI 요소의 **BBOX 좌표를 동적으로 찾아낸다.**
    * **강점:** UI의 '생김새(패턴)'를 학습하므로, 화면 비율이 바뀌어 UI가 '재배치(Re-anchor)'되어도 정확히 추적한다.

2.  **[Task 2: 인식] OCR 엔진 (Tesseract, EasyOCR 등)**
    * **역할:** Task 1에서 찾아낸 **BBOX 영역의 이미지**만 입력받아, 그 안의 텍스트(예: "일일 임무 (5/10)")를 추출한다.
    * **강점:** 이미 검증된 고성능 OCR 엔진을 활용하여, 인식률을 극대화하고 텍스트 인식 모델을 별도로 학습시키는 비용을 절감한다.

---

## 3. 💾 데이터 전략 (Data Strategy)

모델의 성능은 데이터의 품질로 직결되므로, '최소한의 노력으로 최대의 다양성'을 확보하는 것을 목표로 한다.

### 3-1. 원천 데이터 (Source)

* 보유 중인 약 1개월 분량의 게임 플레이 녹화 영상 (단일 해상도: `2560x1600`)

### 3-2. 라벨링 계획 (Labeling Plan)

* **도구:** `Label Studio` 활용
* **방식:** 개별 프레임이 아닌, **'비디오 타임라인'**에 직접 라벨링.
    * 예: `[01:30 ~ 01:35]` 구간에 `[quest_hud_bbox]`가 나타남.
* **라벨 스키마:** `[BBOX 좌표]` + `[UI 태그]` (예: `quest_hud_daily`, `quest_hud_complete`)
    * **중요:** OD 모델 학습이 목적이므로, BBOX 안의 '텍스트 내용'은 라벨링하지 않는다. (이는 Task 2 OCR의 몫)

### 3-3. 데이터 추출 (Smart Sampling)

단순히 초당 1프레임씩 추출하는 방식은 '잠수' 구간의 과적합(Overfitting)을 유발한다. **'장면 변화 감지(Scene Change Detection)'** 기반의 스마트 샘플링을 도입한다.

* **로직:** SSIM(Structural Similarity Index) 등 이미지 유사도 측정
* **기준 1: (Idle 감지)** 이전 프레임과 유사도(SSIM)가 매우 높으면 (예: `> 0.98`) "변화 없는 잠수 구간"으로 판단하여 **프레임을 버린다.**
* **기준 2: (Action 감지)** 이전 프레임과 유사도가 낮으면 (예: `< 0.85`) "UI가 팝업되거나 배경이 급변하는 유의미한 구간"으로 판단하여 **프레임을 저장한다.**

### 3-4. 데이터 품질 확보 (Robustness)

`2560x1600` 단일 해상도 데이터만으로는 다양한 화면 비율/해상도에 대응하는 '튼튼한' 모델을 만들 수 없다.

* **기본:** 'Padding', 'Cropping' 등 데이터 증강(Augmentation)을 활용.
* **핵심 (고품질 전략):** 약간의 수작업을 동반하더라도, **가장 현실적인(Realistic) 데이터를 확보**한다.
    * **액션:** 다양한 주요 해상도 및 화면 비율(예: `1920x1080 (16:9)`, `3440x1440 (21:9)`)로 게임 설정을 변경하며 **추가 플레이 영상을 직접 녹화**한다.
    * **이유:** 인위적인 증강(찌그러짐)보다, 게임 엔진이 UI를 '재배치'한 실제 화면을 학습하는 것이 모델 성능에 직결된다.

## 4. 🚀 다음 단계 (Next Steps)

1.  **[Recording]** 주요 해상도(`16:9`, `21:9` 등)별 추가 플레이 영상 녹화
2.  **[Labeling]** `Label Studio` 프로젝트 생성 및 영상 타임라인 기반 BBOX 라벨링 작업 시작
3.  **[Scripting]** SSIM 기반 '스마트 샘플링' Python 스크립트 개발 (OpenCV, scikit-image)
4.  **[Dataset]** 스크립트를 실행하여 최종 학습용 이미지 데이터셋 구축
5.  **[Training]** `YOLOv8` 등 OD 모델 프레임워크 설정 및 1차 학습 시작