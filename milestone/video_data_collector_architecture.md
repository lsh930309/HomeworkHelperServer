# π€ ν”„λ΅μ νΈ: μ¤ν¬λ¦° μΈμ‹μ„ ν†µν• κ²μ„ λ°μ΄ν„° μλ™ μμ§‘ μ‹μ¤ν…

## 1. ν”„λ΅μ νΈ λ©ν‘

μ£ΌκΈ°μ μΈ ν™”λ©΄ μΊ΅μ², OCR, ν…ν”λ¦Ώ λ§¤μΉ­μ„ ν†µν•΄ κ²μ„ λ‚΄ νΉμ • UI μ”μ†μ μ •λ³΄λ¥Ό μλ™μΌλ΅ μΈμ‹ν•κ³ , μ΄λ¥Ό λ°”νƒ•μΌλ΅ μ‚¬μ©μμ κ²μ„ ν”λ μ΄ λ°μ΄ν„°λ¥Ό μμ§‘ λ° λ΅κΉ…ν•λ‹¤.

**μ£Όμ” μμ§‘ λ€μƒ:**
1.  **λ°λ³µμ„± μ½ν…μΈ :** μΌμΌ/μ£Όκ°„ μ„λ¬΄ μν–‰ μ—¬λ¶€ (ν…ν”λ¦Ώ λ§¤μΉ­)
2.  **μ½ν…μΈ  μ‹κ°„:** νΉμ • μ½ν…μΈ (μ „ν¬, μ‹λ®¬λ μ΄μ… λ“±)μ μ‹μ‘/μΆ…λ£ μ‹κ°„ λ° μ†μ” μ‹κ°„ (μƒνƒ μ¶”μ )
3.  **κ²μ„ λ‚΄ μμ›:** κ°μ²™λ ¥, λ°°ν„°λ¦¬ λ“± μλ™ μ¶©μ „ μμ› νΈλν‚Ή (OCR)
4.  **μ¬ν™”:** μ„±μ¥, μ›μ„ λ“± ν„κΈμ„± μ¬ν™” νΈλν‚Ή (OCR)

## 2. ν•µμ‹¬ μ•„ν‚¤ν…μ²

λ³Έ μ‹μ¤ν…μ€ **"λ°μ΄ν„°μ…‹ κµ¬μ¶•"** λ‹¨κ³„μ™€ **"λΌμ΄λΈ μ„λΉ„μ¤"** λ‹¨κ³„λ΅ λ¶„λ¦¬λλ‹¤.

* **1λ‹¨κ³„ (κ°λ°): λ°μ΄ν„°μ…‹ κµ¬μ¶• λ° νλΌλ―Έν„° μµμ ν™”**
    * `Label Studio`λ¥Ό μ‚¬μ©ν•΄ μ‚¬μ „ λ…Ήν™”λ κ²μ„ μμƒ(`gameplay.mp4`)μ—μ„ λΌλ²¨λ§μ„ μν–‰ν•λ‹¤.
    * λΌλ²¨λ§ κ²°κ³Ό(`labels.json`)λ¥Ό 'μ •λ‹µμ§€'λ΅ μ‚Όμ•„, `optimizer.py` μ¤ν¬λ¦½νΈκ°€ μµμ μ OCR μ „μ²λ¦¬ νλΌλ―Έν„°λ¥Ό νƒμƒ‰ν•λ‹¤.
    * νƒμƒ‰λ μµμ μ νλΌλ―Έν„°μ™€ BBox μΆν‘λ¥Ό `config.json`μ— μ €μ¥ν•λ‹¤.

* **2λ‹¨κ³„ (μ΄μ): λΌμ΄λΈ λ°μ΄ν„° μμ§‘**
    * `main_collector.py`κ°€ `config.json`μ„ λ΅λ“ν•λ‹¤.
    * `mss`λ¥Ό μ‚¬μ©ν•΄ μ‹¤μ‹κ°„ κ²μ„ ν™”λ©΄μ„ μΊ΅μ²ν•λ‹¤.
    * μ„¤μ •κ°’μ— λ”°λΌ μ΄λ―Έμ§€λ¥Ό μ „μ²λ¦¬ν•κ³  OCR/ν…ν”λ¦Ώ λ§¤μΉ­μ„ μν–‰ν•λ‹¤.
    * μΈμ‹λ λ°μ΄ν„°λ¥Ό (μ: `logs.db` λλ” `data.csv`)μ— κΈ°λ΅ν•λ‹¤.

## 3. κ°λ° μ›ν¬ν”λ΅μ° (ν•µμ‹¬)

κ°€μ¥ ν° λ‚κ΄€μΈ 'OCR νλΌλ―Έν„° νλ‹'μ„ μλ™ν™”ν•λ” κ²ƒμ΄ ν•µμ‹¬μ΄λ‹¤.

### Phase 1: λ°μ΄ν„°μ…‹ κµ¬μ¶• (Label Studio)

1.  **λ„κµ¬:** `Label Studio`
2.  **μ…λ ¥:** `dataset/gameplay.mp4` (λ―Έλ¦¬ λ…Ήν™”ν• μ „μ²΄ ν™”λ©΄ μμƒ)
3.  **μ‘μ—…:**
    * μμƒμ—μ„ μΈμ‹ν•  λ€μƒ(μ: 'κ°μ²™λ ¥')μ BBoxλ¥Ό κ·Έλ¦°λ‹¤.
    * ν•΄λ‹Ή BBoxμ— `stamina` (κ°μ²™λ ¥) κ°™μ€ `key`λ¥Ό ν• λ‹Ήν•λ‹¤.
    * ν•΄λ‹Ή BBoxκ°€ μ ν¨ν• 'μ‹κ°„ κµ¬κ°„'μ„ μ§€μ •ν•λ‹¤.
    * ν•΄λ‹Ή κµ¬κ°„μ—μ„ OCRμ΄ μ½μ–΄μ•Ό ν•  'μ •λ‹µ ν…μ¤νΈ'(μ: `"180 / 240"`)λ¥Ό μ…λ ¥ν•λ‹¤.
    * λ‹¤λ¥Έ λ¨λ“  μμ§‘ λ€μƒ(μ¬ν™”, μ„λ¬΄ μ™„λ£ μ²΄ν¬)μ— λ€ν•΄ λ°λ³µν•λ‹¤.
4.  **μ¶λ ¥:** `dataset/labels.json` (BBox μΆν‘, Key, μ‹κ°„ κµ¬κ°„, μ •λ‹µ ν…μ¤νΈκ°€ ν¬ν•¨λ κµ¬μ΅°ν™”λ λ°μ΄ν„°)

### Phase 2: OCR νλΌλ―Έν„° μµμ ν™” (μλ™ν™” μ¤ν¬λ¦½νΈ)

1.  **μ¤ν¬λ¦½νΈ:** `optimizer.py`
2.  **μ…λ ¥:** `dataset/gameplay.mp4` + `dataset/labels.json`
3.  **λ΅μ§ (Grid Search):**
    * ν…μ¤νΈν•  μ „μ²λ¦¬ νλΌλ―Έν„° ν›„λ³΄κµ°μ„ μ •μν•λ‹¤. (μ: `threshold_values = [100, 120, 140]`, `blur_kernels = [(3,3), (5,5)]`)
    * λ¨λ“  νλΌλ―Έν„° μ΅°ν•©μ„ μνν•λ‹¤.
    * κ° μ΅°ν•©μΌλ΅ `labels.json`μ— λ…μ‹λ λ¨λ“  'μ ν¨ κµ¬κ°„'μ ν”„λ μ„μ„ μ²λ¦¬(BBox μλ¥΄κΈ° -> μ „μ²λ¦¬ -> OCR)ν•λ‹¤.
    * OCR κ²°κ³Όμ™€ `labels.json`μ 'μ •λ‹µ ν…μ¤νΈ'λ¥Ό λΉ„κµν•μ—¬ μ •ν™•λ„(Score)λ¥Ό κ³„μ‚°ν•λ‹¤.
4.  **μ¶λ ¥:** κ°€μ¥ λ†’μ€ μ •ν™•λ„λ¥Ό λ³΄μΈ νλΌλ―Έν„° μ΅°ν•© (μ: `{'threshold': 140, 'blur_kernel': (3,3)}`)

### Phase 3: μ„¤μ • νμΌ μ™„λ£

1.  **νμΌ:** `config.json`
2.  **μ‘μ—…:**
    * Phase 1μ—μ„ μ •μν• BBox μΆν‘μ™€ Keyλ¥Ό μ €μ¥ν•λ‹¤.
    * Phase 2μ—μ„ μ°Ύμ€ μµμ μ OCR νλΌλ―Έν„°λ¥Ό μ €μ¥ν•λ‹¤.
    * ν…ν”λ¦Ώ λ§¤μΉ­μ— μ‚¬μ©ν•  μ΄λ―Έμ§€ κ²½λ΅(μ: `templates/quest_done.png`)λ¥Ό μ €μ¥ν•λ‹¤.

### Phase 4: λΌμ΄λΈ μ„λΉ„μ¤ μ‹¤ν–‰

1.  **μ¤ν¬λ¦½νΈ:** `main_collector.py`
2.  **μ‘μ—…:**
    * `config.json`μ„ λ΅λ“ν•λ‹¤.
    * λ¬΄ν• λ£¨ν”„λ¥Ό λλ©° `mss`λ΅ μ‹¤μ‹κ°„ ν™”λ©΄μ BBox μμ—­λ§ μΊ΅μ²ν•λ‹¤.
    * `config.json`μ— μ €μ¥λ μµμ μ νλΌλ―Έν„°λ΅ μ „μ²λ¦¬ λ° μΈμ‹μ„ μν–‰ν•λ‹¤.
    * μ΄μ „ μƒνƒμ™€ λΉ„κµν•μ—¬ λ³€ν™”(μ: μμ› μ†λ¨, μ„λ¬΄ μ™„λ£)λ¥Ό κ°μ§€ν•λ‹¤.
    * κ°μ§€λ μ΄λ²¤νΈλ¥Ό νƒ€μ„μ¤νƒ¬ν”„μ™€ ν•¨κ» λ΅κΉ…ν•λ‹¤.

## 4. μμƒ λ””λ ‰ν„°λ¦¬ κµ¬μ΅°

/game-data-collector/ | |-- main_collector.py # 4λ‹¨κ³„: λΌμ΄λΈ μμ§‘κΈ° |-- optimizer.py # 2λ‹¨κ³„: OCR νλΌλ―Έν„° μλ™ νλ‹ μ¤ν¬λ¦½νΈ | |-- config.json # 3λ‹¨κ³„: BBox μΆν‘ λ° μµμ  νλΌλ―Έν„°κ°€ μ €μ¥λ μ„¤μ • νμΌ |-- requirements.txt # (mss, opencv-python, pytesseract, numpy) | |-- /dataset/ | |-- gameplay.mp4 # 1λ‹¨κ³„: λΌλ²¨λ§μ„ μ„ν• μ›λ³Έ κ²μ„ μμƒ | |-- labels.json # 1λ‹¨κ³„: Label Studioμ—μ„ Exportν• μ •λ‹µμ§€ | |-- /templates/ | |-- quest_complete.png # ν…ν”λ¦Ώ λ§¤μΉ­μ© 'μ„λ¬΄ μ™„λ£' Vμ²΄ν¬ μ•„μ΄μ½ | |-- combat_icon.png # 'μ „ν¬ μƒνƒ' κ°μ§€μ© ν…ν”λ¦Ώ | |-- /logs/ |-- events.log # μμ§‘λ λ°μ΄ν„°κ°€ μ €μ¥λ  νμΌ (λλ” .db, .csv)


## 5. ν•µμ‹¬ λΌμ΄λΈλ¬λ¦¬

* **`mss`:** μ‹¤μ‹κ°„ ν™”λ©΄ μΊ΅μ² (BBox μμ—­λ§ λΉ λ¥΄κ² μΊ΅μ²ν•λ” λ° μµμ ν™”λ¨)
* **`opencv-python` (`cv2`)**: μ΄λ―Έμ§€ μ „μ²λ¦¬(ν‘λ°±, μ΄μ§„ν™”), ν…ν”λ¦Ώ λ§¤μΉ­, λΉ„λ””μ¤ νμΌ μ½κΈ°
* **`pytesseract`:** OCR μν–‰ (Tesseract μ—”μ§„ μ—°λ™)
* **`numpy`:** OpenCV μ΄λ―Έμ§€ λ°μ΄ν„°(λ°°μ—΄) μ²λ¦¬
* **`label-studio`:** (μ„¤μΉν• λ„κµ¬) λ°μ΄ν„°μ…‹ κµ¬μ¶•μ©